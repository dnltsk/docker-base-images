server {
  listen      8080;
  root        /data/www/project/public;
  index       index.php index.html;

  include     /etc/nginx/conf.d/default-*.conf;
  include     /data/conf/nginx/conf.d/default-*.conf;

  # PHP backend is not in the default-*.conf file set,
  # as some vhost might not want to include it.
  # the default settings are: include     /etc/nginx/conf.d/php-location.conf;
  location / {
    # SLIM
    try_files $uri $uri/ /index.php$is_args$args;
  }

  location ~ \.php$ {
    # CORS
    add_header 'Access-Control-Allow-Origin' *;
    # SLIM
    try_files $uri =404;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;

    # DEFAULT
    include         fastcgi_params;

    # SLIM
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param SCRIPT_NAME $fastcgi_script_name;

    # DEFAULT
    fastcgi_pass    php-upstream;
  }

  # Import configuration files for status pages for Nginx and PHP-FPM
  include /etc/nginx/conf.d/stub-status.conf;
  include /etc/nginx/conf.d/fpm-status.conf;

}
